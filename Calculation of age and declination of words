
&НаКлиенте
Процедура РассчитатьВозвраст(Команда)
	
	НастоящееВремя = (ТекущаяДата());
	
	КоличествоЛетСМесяцем = (НастоящееВремя - ДатаРождения) / Число("31536000"); //  Число("31536000") взято из интернета как число секунд в году.
	КоличествоЛет = Цел(КоличествоЛетСМесяцем);
	КоличествоМесяцев = Цел((Формат(КоличествоЛетСМесяцем,"ЧДЦ=2")-КоличествоЛет) * 12);
	
	СтруктураВозвраста = ПроскланироватьСообщение(КоличествоЛет, КоличествоМесяцев);
	
	Сообщить(СтруктураВозвраста.КоличествоЛет + " " + СтруктураВозвраста.КоличествоМесяцев);
		
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	ДатаРождения = Дата('1998.11.25');
КонецПроцедуры

&НаСервере
Функция ПроскланироватьСообщение(КоличествоЛет, КоличествоМесяцев)
	
	СтруктураВозвраста = Новый Структура();
	
	Если КоличествоЛет <= 4 Тогда
		РезультатСклонения = ПолучитьСклоненияСтрокиПоЧислу("год", КоличествоЛет,,"ЧС=Количественное","ПД=Винительный","ЧЦ=10; ЧН=0" );
		КоличествоЛетСтрока = РезультатСклонения[0];
		
	ИначеЕсли КоличествоЛет <= 20 Тогда
		КоличествоЛетСтрока = "" + Строка(КоличествоЛет) + " лет";
		
	Иначе
		Если Прав(КоличествоЛет,1) = "1" ИЛИ Прав(КоличествоЛет,1) = "2" ИЛИ Прав(КоличествоЛет,1) = "3" ИЛИ Прав(КоличествоЛет,1) = "4" Тогда
			РезультатСклонения = ПолучитьСклоненияСтрокиПоЧислу("год", КоличествоЛет,,"ЧС=Количественное","ПД=Винительный");
			КоличествоЛетСтрока = РезультатСклонения[0];
		Иначе
			КоличествоЛетСтрока = "" +КоличествоЛет + " лет"
		КонецЕсли;
	КонецЕсли;
	
		РезультатСклоненияМесяца	= ПолучитьСклоненияСтрокиПоЧислу("месяц", КоличествоМесяцев,,"ЧС=Количественное","ПД=Винительный","ЧЦ=10; ЧН=0");
		КоличествоМесяцевСтрока		= РезультатСклоненияМесяца[0];
	
		СтруктураВозвраста.Вставить("КоличествоЛет", КоличествоЛетСтрока);	
		СтруктураВозвраста.Вставить("КоличествоМесяцев", КоличествоМесяцевСтрока);
		
		Возврат СтруктураВозвраста;
		
КонецФункции
